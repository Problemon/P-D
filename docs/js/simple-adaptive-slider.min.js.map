{"version":3,"sources":["simple-adaptive-slider.js"],"names":["ItcSimpleSlider","static","PREFIX","CLASS_NAME_ITEMS","CLASS_NAME_ITEM","CLASS_NAME_ITEM_ACTIVE","CLASS_NAME_INDICATOR_ACTIVE","CLASS_NAME_INDICATORS","CLASS_NAME_CONTROL","CLASS_NAME_CONTROL_NEXT","CLASS_NAME_CONTROL_PREV","constructor","target","config","this","_el","document","querySelector","_elWrapper","SELECTOR_WRAPPER","_elItems","SELECTOR_ITEMS","_elsItem","querySelectorAll","SELECTOR_ITEM","_currentIndex","_minOrder","_maxOrder","_$itemWithMinOrder","_$itemWithMaxOrder","_minTranslate","_maxTranslate","_direction","_balancingItemsFlag","_transform","_width","getBoundingClientRect","width","_supportResizeObserver","window","ResizeObserver","_hasSwipeState","_swipeStartPosX","_intervalId","_config","Object","assign","autoplay","loop","indicators","interval","swipe","dataset","translate","forEach","item","index","order","count","length","translateX","style","transform","_addIndicators","_refreshExtremeValues","_setActiveClass","_addEventListener","_autoplay","elActive","SELECTOR_ITEM_ACTIVE","classList","remove","elActiveNew","add","elIndicatorActive","SELECTOR_INDICATOR_ACTIVE","elIndicatorNew","elPrevBtn","SELECTOR_CONTROL_PREV","elNextBtn","SELECTOR_CONTROL_NEXT","CLASS_NAME_CONTROL_SHOW","dispatchEvent","CustomEvent","bubbles","_move","useTransition","TRANSITION_NONE","step","_moveTo","currentIndex","i","Math","abs","action","clearInterval","setInterval","bind","SELECTOR_INDICATORS","html","CLASS_NAME_INDICATOR","insertAdjacentHTML","parseInt","$item","_balancingItems","wrapperRect","halfWidthItem","wrapperLeft","left","$min","right","wrapperRight","$max","requestAnimationFrame","$items","onSwipeStart","e","closest","event","type","search","touches","clientX","_swipeStartPosY","clientY","_hasSwiping","onSwipeMove","diffPosX","diffPosY","preventDefault","value","onSwipeEnd","changedTouches","SWIPE_THRESHOLD","addEventListener","$target","contains","slide","slideTo","supportsPassive","opts","defineProperty","get","err","passive","visibilityState","resizeObserver","entries","newTranslateX","contentBoxSize","contentRect","newWidth","inlineSize","toFixed","observe","next","prev","moveTo"],"mappings":"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","file":"simple-adaptive-slider.min.js","sourcesContent":["/**\r\n * SimpleAdaptiveSlider by itchief v2.0.1 (https://github.com/itchief/ui-components/tree/master/simple-adaptive-slider)\r\n * Copyright 2020 - 2022 Alexander Maltsev\r\n * Licensed under MIT (https://github.com/itchief/ui-components/blob/master/LICENSE)\r\n */\r\n\r\nclass ItcSimpleSlider {\r\n\r\n  // базовые классы и селекторы\r\n  static PREFIX = 'itcss';\r\n  static CLASS_NAME_ITEM = `${ItcSimpleSlider.PREFIX}__item`;\r\n  static CLASS_NAME_ITEM_ACTIVE = `${ItcSimpleSlider.PREFIX}__item_active`;\r\n  static CLASS_NAME_ITEMS = `${ItcSimpleSlider.PREFIX}__items`;\r\n  static CLASS_NAME_INDICATOR = `${ItcSimpleSlider.PREFIX}__indicator`;\r\n  static CLASS_NAME_INDICATOR_ACTIVE = `${ItcSimpleSlider.PREFIX}__indicator_active`;\r\n  static CLASS_NAME_INDICATORS = `${ItcSimpleSlider.PREFIX}__indicators`;\r\n  static CLASS_NAME_CONTROL = `${ItcSimpleSlider.PREFIX}__control`;\r\n  static CLASS_NAME_CONTROL_PREV = `${ItcSimpleSlider.PREFIX}__control_prev`;\r\n  static CLASS_NAME_CONTROL_NEXT = `${ItcSimpleSlider.PREFIX}__control_next`;\r\n  static CLASS_NAME_CONTROL_SHOW = `${ItcSimpleSlider.PREFIX}__control_show`;\r\n  static SELECTOR_ITEMS = `.${ItcSimpleSlider.CLASS_NAME_ITEMS}`;\r\n  static SELECTOR_ITEM = `.${ItcSimpleSlider.CLASS_NAME_ITEM}`;\r\n  static SELECTOR_ITEM_ACTIVE = `.${ItcSimpleSlider.CLASS_NAME_ITEM_ACTIVE}`;\r\n  static SELECTOR_INDICATOR_ACTIVE = `.${ItcSimpleSlider.CLASS_NAME_INDICATOR_ACTIVE}`;\r\n  static SELECTOR_INDICATORS = `.${ItcSimpleSlider.CLASS_NAME_INDICATORS}`;\r\n  static SELECTOR_WRAPPER = `.${ItcSimpleSlider.PREFIX}__wrapper`;\r\n  static SELECTOR_CONTROL = `.${ItcSimpleSlider.CLASS_NAME_CONTROL}`;\r\n  static SELECTOR_CONTROL_NEXT = `.${ItcSimpleSlider.CLASS_NAME_CONTROL_NEXT}`;\r\n  static SELECTOR_CONTROL_PREV = `.${ItcSimpleSlider.CLASS_NAME_CONTROL_PREV }`;\r\n  // порог для переключения слайда (20%)\r\n  static SWIPE_THRESHOLD = 20;\r\n  // класс для отключения transition\r\n  static TRANSITION_NONE = 'transition-none';\r\n\r\n  constructor(target, config) {\r\n    this._el = typeof target === 'string' ? document.querySelector(target) : target;\r\n    this._elWrapper = this._el.querySelector(ItcSimpleSlider.SELECTOR_WRAPPER);\r\n    this._elItems = this._el.querySelector(ItcSimpleSlider.SELECTOR_ITEMS);\r\n    this._elsItem = this._el.querySelectorAll(ItcSimpleSlider.SELECTOR_ITEM);\r\n    // текущий индекс\r\n    this._currentIndex = 0;\r\n    // экстремальные значения слайдов\r\n    this._minOrder = 0;\r\n    this._maxOrder = 0;\r\n    this._$itemWithMinOrder = null;\r\n    this._$itemWithMaxOrder = null;\r\n    this._minTranslate = 0;\r\n    this._maxTranslate = 0;\r\n    // направление смены слайдов (по умолчанию)\r\n    this._direction = 'next';\r\n    // флаг, который показывает, что идёт процесс уравновешивания слайдов\r\n    this._balancingItemsFlag = false;\r\n    // текущее значение трансформации\r\n    this._transform = 0;\r\n\r\n    this._width = this._elWrapper.getBoundingClientRect().width;\r\n\r\n    this._supportResizeObserver = typeof window.ResizeObserver !== 'undefined';\r\n\r\n    // swipe параметры\r\n    this._hasSwipeState = false;\r\n    this._swipeStartPosX = 0;\r\n    // id таймера\r\n    this._intervalId = null;\r\n    // конфигурация слайдера (по умолчанию)\r\n    const defaultConfig = {\r\n      autoplay: false,\r\n      loop: true,\r\n      indicators: true,\r\n      interval: 5000,\r\n      swipe: true,\r\n    };\r\n    this._config = Object.assign(defaultConfig, config);\r\n    this._elItems.dataset.translate = 0;\r\n    // добавляем к слайдам data-атрибуты\r\n    this._elsItem.forEach((item, index) => {\r\n      item.dataset.order = index;\r\n      item.dataset.index = index;\r\n      item.dataset.translate = 0;\r\n    });\r\n    // перемещаем последний слайд перед первым\r\n    if (this._config.loop) {\r\n      var count = this._elsItem.length - 1;\r\n      var translate = -this._elsItem.length;\r\n      this._elsItem[count].dataset.order = -1;\r\n      this._elsItem[count].dataset.translate = -this._elsItem.length;\r\n      var translateX = translate * this._width;\r\n      this._elsItem[count].style.transform = 'translateX(' + translateX + 'px)';\r\n    }\r\n    // добавляем индикаторы к слайдеру\r\n    this._addIndicators();\r\n    // обновляем экстремальные значения переменных\r\n    this._refreshExtremeValues();\r\n    // помечаем активные элементы\r\n    this._setActiveClass();\r\n    // назначаем обработчики\r\n    this._addEventListener();\r\n    // запускаем автоматическую смену слайдов\r\n    this._autoplay();\r\n  }\r\n\r\n  _setActiveClass() {\r\n    const elActive = this._el.querySelector(ItcSimpleSlider.SELECTOR_ITEM_ACTIVE);\r\n    elActive ? elActive.classList.remove(ItcSimpleSlider.CLASS_NAME_ITEM_ACTIVE) : null;\r\n    const elActiveNew = this._el.querySelector(`[data-index=\"${this._currentIndex}\"]`);\r\n    elActiveNew ? elActiveNew.classList.add(ItcSimpleSlider.CLASS_NAME_ITEM_ACTIVE) : null;\r\n\r\n    const elIndicatorActive = this._el.querySelector(ItcSimpleSlider.SELECTOR_INDICATOR_ACTIVE);\r\n    elIndicatorActive ? elIndicatorActive.classList.remove(ItcSimpleSlider.CLASS_NAME_INDICATOR_ACTIVE) : null;\r\n    const elIndicatorNew = this._el.querySelector(`[data-slide-to=\"${this._currentIndex}\"]`);\r\n    elIndicatorNew ? elIndicatorNew.classList.add(ItcSimpleSlider.CLASS_NAME_INDICATOR_ACTIVE) : null;\r\n\r\n    const elPrevBtn = this._el.querySelector(ItcSimpleSlider.SELECTOR_CONTROL_PREV);\r\n    const elNextBtn = this._el.querySelector(ItcSimpleSlider.SELECTOR_CONTROL_NEXT);\r\n    elPrevBtn ? elPrevBtn.classList.add(ItcSimpleSlider.CLASS_NAME_CONTROL_SHOW) : null;\r\n    elNextBtn ? elNextBtn.classList.add(ItcSimpleSlider.CLASS_NAME_CONTROL_SHOW) : null;\r\n    if (!this._config.loop && this._currentIndex === 0) {\r\n      elPrevBtn.classList.remove(ItcSimpleSlider.CLASS_NAME_CONTROL_SHOW);\r\n    } else if (!this._config.loop && this._currentIndex === this._elsItem.length - 1) {\r\n      elNextBtn.classList.remove(ItcSimpleSlider.CLASS_NAME_CONTROL_SHOW);\r\n    }\r\n\r\n    this._el.dispatchEvent(new CustomEvent('active.itc.slider', {\r\n      bubbles: true\r\n    }));\r\n  }\r\n\r\n  // смена слайдов\r\n  _move(useTransition) {\r\n    var translateX;\r\n    this._elItems.classList.remove(ItcSimpleSlider.TRANSITION_NONE);\r\n    if (useTransition === false) {\r\n      this._elItems.classList.add(ItcSimpleSlider.TRANSITION_NONE);\r\n    }\r\n    if (this._direction === 'none') {\r\n      translateX = this._transform * this._width;\r\n      this._elItems.style.transform = 'translateX(' + translateX + 'px)';\r\n      return;\r\n    }\r\n    if (!this._config.loop) {\r\n      var condition = this._currentIndex + 1 >= this._elsItem.length;\r\n      if (condition && this._direction === 'next') {\r\n        this._autoplay('stop');\r\n        return;\r\n      }\r\n      if (this._currentIndex <= 0 && this._direction === 'prev') {\r\n        return;\r\n      }\r\n    }\r\n    var step = this._direction === 'next' ? -1 : 1;\r\n    var transform = this._transform + step;\r\n    if (this._direction === 'next') {\r\n      if (++this._currentIndex > this._elsItem.length - 1) {\r\n        this._currentIndex -= this._elsItem.length;\r\n      }\r\n    } else {\r\n      if (--this._currentIndex < 0) {\r\n        this._currentIndex += this._elsItem.length;\r\n      }\r\n    }\r\n    this._transform = transform;\r\n    this._elItems.dataset.translate = transform;\r\n    translateX = transform * this._width;\r\n    this._elItems.style.transform = 'translateX(' + translateX + 'px)';\r\n    this._elItems.dispatchEvent(new CustomEvent('transition-start', {\r\n      bubbles: true\r\n    }));\r\n    this._setActiveClass();\r\n  }\r\n\r\n  // функция для перемещения к слайду по индексу\r\n  _moveTo(index, useTransition) {\r\n    var currentIndex = this._currentIndex;\r\n    this._direction = index > currentIndex ? 'next' : 'prev';\r\n    for (var i = 0; i < Math.abs(index - currentIndex); i++) {\r\n      this._move(useTransition);\r\n    }\r\n  }\r\n\r\n  // метод для автоматической смены слайдов\r\n  _autoplay = function (action) {\r\n    if (!this._config.autoplay) {\r\n      return;\r\n    }\r\n    if (action === 'stop') {\r\n      clearInterval(this._intervalId);\r\n      this._intervalId = null;\r\n      return;\r\n    }\r\n    if (this._intervalId === null) {\r\n      this._intervalId = setInterval(function () {\r\n          this._direction = 'next';\r\n          this._move();\r\n        }.bind(this),\r\n        this._config.interval\r\n      );\r\n    }\r\n  }\r\n\r\n  // добавление индикаторов\r\n  _addIndicators() {\r\n    if (this._el.querySelector(ItcSimpleSlider.SELECTOR_INDICATORS) || !this._config.indicators) {\r\n      return;\r\n    }\r\n    let html = '';\r\n    for (let i = 0, length = this._elsItem.length; i < length; i++) {\r\n      html += `<li class=\"${ItcSimpleSlider.CLASS_NAME_INDICATOR}\" data-slide-to=\"${i}\"></li>`\r\n    }\r\n    this._el.insertAdjacentHTML('beforeend', `<ol class=\"${ItcSimpleSlider.CLASS_NAME_INDICATORS}\">${html}</ol>`);\r\n  }\r\n\r\n  // refresh extreme values\r\n  _refreshExtremeValues() {\r\n    this._minOrder = parseInt(this._elsItem[0].dataset.order);\r\n    this._maxOrder = this._minOrder;\r\n    this._$itemWithMinOrder = this._elsItem[0];\r\n    this._$itemWithMaxOrder = this._$itemWithMinOrder;\r\n    this._minTranslate = parseInt(this._elsItem[0].dataset.translate);\r\n    this._maxTranslate = this._minTranslate;\r\n    for (var i = 0, length = this._elsItem.length; i < length; i++) {\r\n      var $item = this._elsItem[i];\r\n      var order = parseInt($item.dataset.order);\r\n      if (order < this._minOrder) {\r\n        this._minOrder = order;\r\n        this._$itemWithMinOrder = $item;\r\n        this._minTranslate = parseInt($item.dataset.translate);\r\n      } else if (order > this._maxOrder) {\r\n        this._maxOrder = order;\r\n        this._$itemWithMaxOrder = $item;\r\n        this._maxTranslate = parseInt($item.dataset.translate);\r\n      }\r\n    }\r\n  }\r\n\r\n  // balancing items\r\n  _balancingItems() {\r\n    if (!this._balancingItemsFlag) {\r\n      return;\r\n    }\r\n    var $wrapper = this._elWrapper;\r\n    var wrapperRect = $wrapper.getBoundingClientRect();\r\n    var halfWidthItem = wrapperRect.width / 2;\r\n    var count = this._elsItem.length;\r\n    var translate;\r\n    var clientRect;\r\n    var translateX;\r\n    if (this._direction === 'next') {\r\n      var wrapperLeft = wrapperRect.left;\r\n      var $min = this._$itemWithMinOrder;\r\n      translate = this._minTranslate;\r\n      clientRect = $min.getBoundingClientRect();\r\n      if (clientRect.right < wrapperLeft - halfWidthItem) {\r\n        $min.dataset.order = this._minOrder + count;\r\n        translate += count;\r\n        $min.dataset.translate = translate;\r\n        translateX = translate * this._width;\r\n        $min.style.transform = 'translateX(' + translateX + 'px)';\r\n        this._refreshExtremeValues();\r\n      }\r\n    } else if (this._direction === 'prev') {\r\n      var wrapperRight = wrapperRect.right;\r\n      var $max = this._$itemWithMaxOrder;\r\n      translate = this._maxTranslate;\r\n      clientRect = $max.getBoundingClientRect();\r\n      if (clientRect.left > wrapperRight + halfWidthItem) {\r\n        $max.dataset.order = this._maxOrder - count;\r\n        translate -= count;\r\n        $max.dataset.translate = translate;\r\n        translateX = translate * this._width;\r\n        $max.style.transform = 'translateX(' + translateX + 'px)';\r\n        this._refreshExtremeValues();\r\n      }\r\n    }\r\n    requestAnimationFrame(this._balancingItems.bind(this));\r\n  };\r\n\r\n  // adding listeners\r\n  _addEventListener() {\r\n    var $items = this._elItems;\r\n\r\n    function onClick(e) {\r\n      var $target = e.target;\r\n      this._autoplay('stop');\r\n      if ($target.classList.contains(ItcSimpleSlider.CLASS_NAME_CONTROL)) {\r\n        e.preventDefault();\r\n        this._direction = $target.dataset.slide;\r\n        this._move();\r\n      } else if ($target.dataset.slideTo) {\r\n        e.preventDefault();\r\n        var index = parseInt($target.dataset.slideTo);\r\n        this._moveTo(index);\r\n      }\r\n      if (this._config.loop) {\r\n        this._autoplay();\r\n      }\r\n    }\r\n\r\n    function onTransitionStart() {\r\n      if (this._balancingItemsFlag) {\r\n        return;\r\n      }\r\n      this._balancingItemsFlag = true;\r\n      window.requestAnimationFrame(this._balancingItems.bind(this));\r\n    }\r\n\r\n    function onTransitionEnd() {\r\n      this._balancingItemsFlag = false;\r\n      this._el.dispatchEvent(new CustomEvent('transition-end', {\r\n        bubbles: true\r\n      }));\r\n    }\r\n\r\n    function onMouseEnter() {\r\n      this._autoplay('stop');\r\n    }\r\n\r\n    function onMouseLeave() {\r\n      if (this._config.loop) {\r\n        this._autoplay();\r\n      }\r\n    }\r\n\r\n    function onSwipeStart(e) {\r\n      this._autoplay('stop');\r\n      if (e.target.closest(ItcSimpleSlider.CLASS_NAME_CONTROL)) {\r\n        return;\r\n      }\r\n      var event = e.type.search('touch') === 0 ? e.touches[0] : e;\r\n      this._swipeStartPosX = event.clientX;\r\n      this._swipeStartPosY = event.clientY;\r\n      this._hasSwipeState = true;\r\n      this._hasSwiping = false;\r\n    }\r\n\r\n    function onSwipeMove(e) {\r\n      if (!this._hasSwipeState) {\r\n        return;\r\n      }\r\n      var event = e.type.search('touch') === 0 ? e.touches[0] : e;\r\n      var diffPosX = this._swipeStartPosX - event.clientX;\r\n      var diffPosY = this._swipeStartPosY - event.clientY;\r\n      if (!this._hasSwiping) {\r\n        if (Math.abs(diffPosY) > Math.abs(diffPosX) || Math.abs(diffPosX) === 0) {\r\n          this._hasSwipeState = false;\r\n          return;\r\n        }\r\n        this._hasSwiping = true;\r\n      }\r\n      e.preventDefault();\r\n      if (!this._config.loop) {\r\n        if (this._currentIndex + 1 >= this._elsItem.length && diffPosX >= 0) {\r\n          diffPosX = diffPosX / 4;\r\n        }\r\n        if (this._currentIndex <= 0 && diffPosX <= 0) {\r\n          diffPosX = diffPosX / 4;\r\n        }\r\n      }\r\n      var value = (diffPosX / this._elWrapper.getBoundingClientRect().width);\r\n      var translateX = this._transform - value;\r\n      this._elItems.classList.add(ItcSimpleSlider.TRANSITION_NONE);\r\n      translateX = translateX * this._width;\r\n      this._elItems.style.transform = 'translateX(' + translateX + 'px)';\r\n    }\r\n\r\n    function onSwipeEnd(e) {\r\n      if (!this._hasSwipeState) {\r\n        return;\r\n      }\r\n      var event = e.type.search('touch') === 0 ? e.changedTouches[0] : e;\r\n      var diffPosX = this._swipeStartPosX - event.clientX;\r\n      if (diffPosX === 0) {\r\n        this._hasSwipeState = false;\r\n        return;\r\n      }\r\n      if (!this._config.loop) {\r\n        if (this._currentIndex + 1 >= this._elsItem.length && diffPosX >= 0) {\r\n          diffPosX = diffPosX / 7;\r\n        }\r\n        if (this._currentIndex <= 0 && diffPosX <= 0) {\r\n          diffPosX = diffPosX / 7;\r\n        }\r\n      }\r\n      var value = (diffPosX / this._elWrapper.getBoundingClientRect().width) * 100;\r\n      this._elItems.classList.remove(ItcSimpleSlider.TRANSITION_NONE);\r\n      if (value > ItcSimpleSlider.SWIPE_THRESHOLD) {\r\n        this._direction = 'next';\r\n        this._move();\r\n      } else if (value < -ItcSimpleSlider.SWIPE_THRESHOLD) {\r\n        this._direction = 'prev';\r\n        this._move();\r\n      } else {\r\n        this._direction = 'none';\r\n        this._move();\r\n      }\r\n      this._hasSwipeState = false;\r\n      if (this._config.loop) {\r\n        this._autoplay();\r\n      }\r\n    }\r\n\r\n    function onDragStart(e) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    function onVisibilityChange() {\r\n      if (document.visibilityState === 'hidden') {\r\n        this._autoplay('stop');\r\n      } else if (document.visibilityState === 'visible') {\r\n        if (this._config.loop) {\r\n          this._autoplay();\r\n        }\r\n      }\r\n    }\r\n    // click\r\n    this._el.addEventListener('click', onClick.bind(this));\r\n    // transitionstart and transitionend\r\n    if (this._config.loop) {\r\n      $items.addEventListener('transition-start', onTransitionStart.bind(this));\r\n      $items.addEventListener('transitionend', onTransitionEnd.bind(this));\r\n    }\r\n    // mouseenter and mouseleave\r\n    if (this._config.autoplay) {\r\n      this._el.addEventListener('mouseenter', onMouseEnter.bind(this));\r\n      this._el.addEventListener('mouseleave', onMouseLeave.bind(this));\r\n    }\r\n    // swipe\r\n    if (this._config.swipe) {\r\n      var supportsPassive = false;\r\n      try {\r\n        var opts = Object.defineProperty({}, 'passive', {\r\n          get: function () {\r\n            supportsPassive = true;\r\n          },\r\n        });\r\n        window.addEventListener('testPassiveListener', null, opts);\r\n      } catch (err) {}\r\n      this._el.addEventListener('touchstart', onSwipeStart.bind(this),\r\n        supportsPassive ? {\r\n          passive: false\r\n        } : false);\r\n      this._el.addEventListener('touchmove', onSwipeMove.bind(this),\r\n        supportsPassive ? {\r\n          passive: false\r\n        } : false);\r\n      this._el.addEventListener('mousedown', onSwipeStart.bind(this));\r\n      this._el.addEventListener('mousemove', onSwipeMove.bind(this));\r\n      document.addEventListener('touchend', onSwipeEnd.bind(this));\r\n      document.addEventListener('mouseup', onSwipeEnd.bind(this));\r\n      document.addEventListener('mouseout', onSwipeEnd.bind(this));\r\n    }\r\n    this._el.addEventListener('dragstart', onDragStart.bind(this));\r\n    // при изменении активности вкладки\r\n    document.addEventListener('visibilitychange', onVisibilityChange.bind(this));\r\n\r\n    function onResizeObserver(entries) {\r\n      var contentBoxSize = entries[0].contentBoxSize;\r\n      var contentRect = entries[0].contentRect;\r\n      var newWidth = contentRect ? contentRect.width : (contentBoxSize[0] || contentBoxSize).inlineSize;\r\n      var newTranslateX;\r\n      if (this._width.toFixed(1) === newWidth.toFixed(1)) {\r\n        return;\r\n      }\r\n      this._autoplay('stop');\r\n      this._elItems.classList.add(ItcSimpleSlider.TRANSITION_NONE);\r\n      this._width = parseInt(newWidth.toFixed(1), 10);\r\n      newTranslateX = newWidth * parseInt(this._elItems.dataset.translate, 10);\r\n      this._elItems.style.transform = 'translateX(' + newTranslateX + 'px)';\r\n      var $items = this._elsItem;\r\n      for (var i = 0; i < $items.length; i++) {\r\n        var translateX = parseInt($items[i].dataset.translate);\r\n        newTranslateX = translateX * newWidth;\r\n        $items[i].style.transform = 'translateX(' + newTranslateX + 'px)';\r\n      }\r\n      if (this._config.loop) {\r\n        this._autoplay();\r\n      }\r\n    }\r\n    if (this._supportResizeObserver) {\r\n      var resizeObserver = new ResizeObserver(onResizeObserver.bind(this));\r\n      resizeObserver.observe(this._elWrapper);\r\n      return;\r\n    }\r\n  }\r\n\r\n  // перейти к следующему слайду\r\n  next() {\r\n    this._direction = 'next';\r\n    this._move();\r\n  }\r\n\r\n  // перейти к предыдущему слайду\r\n  prev() {\r\n    this._direction = 'prev';\r\n    this._move();\r\n  }\r\n\r\n  // управление автоматической сменой слайдов\r\n  autoplay(action) {\r\n    this._autoplay('stop');\r\n  }\r\n\r\n  moveTo(index, useTransition) {\r\n    this._moveTo(index, useTransition);\r\n  }\r\n\r\n}\r\n\r\nexport {ItcSimpleSlider};\r\n"]}